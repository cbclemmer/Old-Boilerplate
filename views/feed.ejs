<div id="feed" ng-controller="postController as post">
    <h3>Feed</h3>
    	Current: {{post.current}}
    	<form ng-submit="post.addObj()" enctype="multipart/form-data">
        	Type: <br>
        	<select ng-model="post.temp.objekts[post.current].type" id="pTypee" ng-change="post.an()">
        	    <option value="short" selected="selected" ng-show="!post.temp.an||(post.current==0)">Short</option>
        	    <option value="md">Mark Down</option>
                <option value="pic">Picture</option>
        	</select><br>
            <select ng-model="post.temp.vis">
                <option value="true">Public</option>
                <option value="false">Private</option>
            </select><br>
            <input type="text" placeholder="name" ng-model="post.temp.name" ng-show="post.temp.an"><br>
            <span ng-show="post.temp.objekts[post.current].type=='pic'&&post.progress>0">Progress: {{post.progress}}%</span>
        	<!-- for short -->
        	<!--<textarea  id="shortText"></textarea><br>-->
            <textarea ng-model="post.temp.objekts[post.current].text" id="text-input" oninput="this.editor.update()"
            rows="6" cols="60" ng-hide="post.temp.objekts[post.current].type=='pic'">Preview **Markdown** here.</textarea><br>
            <span ng-show="post.temp.objekts[post.current].type=='pic'">
                <input type="text" placeholder="name for picture(optional)" ng-model="post.picName">
                <input type="file" ng-file-select="onFileSelect($files)" name="picture" enctype="multipart/form-
            data">
            </span>
            <script>
                function Editor(input, preview) {
                    this.update = function () {
                        preview.innerHTML = markdown.toHTML(input.value);
                    };
                    input.editor = this;
                this.update();
                }
                var $i = function (id) { return document.getElementById(id); };
                new Editor($i("text-input"), $i("preview"));
            </script>
        </form>
        <button ng-click="post.lastObj()">last part</button>
        <button ng-click="post.addObj()">add part</button>
        <button ng-click="post.create('')">Create Post</button>
        <form ng-submit="post.addTag()">
        	<input type="text" placeholder="Add tag..." ng-model="post.tag" />
            <ul>
                <li ng-repeat="tag in post.tags">{{tag}} <span style="color: red;cursor: pointer" ng-click="post.delTag(tag)">X</span></li>
            </ul>
        </form>
    <h4>Preview</h4>
    <div ng-repeat="obj in post.temp.objekts">
        <h6>{{obj.type}}</h6>
        <span ng-show="obj.type=='short'||obj.type=='md'">{{obj.text}}</span>
        <span ng-show="obj.type=='pic'">
            <span ng-hide="obj.source.length">Empty</span>
            <span ng-show="obj.source.length">{{obj.source}}</span>
        </span>
    </div>
    </form>
</div>
<div id="preview" style="display: none"></div>
<di
<div class="aside">
<div id="fRequests">
    <h5>Friend Requests</h5>
    <ul>
        <li ng-repeat="request in user.frJSON">
            <a href="/api/show/{{request.username}}">{{request.name}}</a> ({{request.email}}) 
            <button ng-click="use.addFriend(request.id)">Confirm</button> 
            <button ng-click="use.deleteRequest(request.id)">Delete</button>
        </li>
    </ul>
    <p ng-show="user.frJSON.length<1">No friend requests</p>
</div>

<div class="friends">
    <h5>Friends</h5>
    <ul>
        <li ng-repeat="friend in user.fJSON">
            <a href="/api/show/{{friend.username}}"> {{friend.name}}</a> <i>@{{friend.username}}</i>&emsp;
            <span ng-show="friend.online">Online</span>
            <span ng-hide="friend.online">Offline</span>
        </li>
    </ul>
    <p ng-show="user.fJSON.length<1">Well, this is awkward</p>
</div>
<div id="groups">
    <h5>Groups</h5>
    <ul>
        <li ng-repeat="group in user.gJSON">
            <a href="/api/show/{{group.handle}}">{{group.name}} <i>@{{group.handle}}</i></a>
        </li>
        <li>
        <form ng-submit="use.nGroup()">
            <input type="text" ng-model="nGroup.name" placeholder="Name"><br>
            <input type="text" ng-model="nGroup.handle" placeholder="Handle"><br>
            <input type="submit" value="Create Group">
        </form>
        </li>
    </ul>
</div>
</div>
